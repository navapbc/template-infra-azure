#!/usr/bin/env bash
set -euo pipefail

network_name="${1:-$(cat)}"

if [[ ! -f infra/project-config/terraform.tfstate ]]; then
    terraform -chdir="infra/project-config" init > /dev/null
    terraform -chdir="infra/project-config" apply -auto-approve > /dev/null
fi

account_name=$(terraform -chdir="infra/project-config" output -json network_configs | jq -r ".[\"${network_name}\"].account_name")

echo "${account_name}"
